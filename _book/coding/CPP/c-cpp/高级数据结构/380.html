
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>树型数据结构 · CoderFAN 资料库</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="CoderFAN 资料库 高级数据结构">
        <meta name="generator" content="GitBook 6.0.3">
        <meta name="author" content="Todd Lyu">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="381.html" />
    
    
    <link rel="prev" href="379.html" />
    
    <!-- MathJax 配置：唯一且完整 -->
<script>
    window.MathJax = {
      tex: {
        inlineMath:  [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true,
        processEnvironments: true,
        strict: "ignore",
        macros: { "\\E":"\\mathbb{E}", "\\Var":"\\operatorname{Var}" }
      },
    };
    </script>
    
    <!-- 核心脚本（defer不阻塞渲染） -->
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <!-- 放在 tex-chtml.js 之后 -->
    <script>
    (function () {
      function typeset() {
        if (window.MathJax && MathJax.typesetPromise) {
          MathJax.typesetPromise().catch(console.error);
        }
      }
    
      /* 第一次正文插入 */
      document.addEventListener('DOMContentLoaded', typeset);
    
      /*   关键：等待 gitbook.js 初始化成功   */
      function hookGitBook() {
        if (window.gitbook && gitbook.events) {
          gitbook.events.bind('page.change', typeset);   // 切章排版
        } else {
          /* gitbook.js 还没加载完 → 100 ms 后再试 */
          setTimeout(hookGitBook, 100);
        }
      }
      hookGitBook();   // 启动递归等待
    })();
    </script>
    
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                <a href=".." class="btn"><b></b>&#128512;返回上层&#128512;</b></a>
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    高级数据结构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="378.html">
            
                <a href="378.html">
            
                    
                    高级树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="379.html">
            
                <a href="379.html">
            
                    
                    多维树数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.3" data-path="380.html">
            
                <a href="380.html">
            
                    
                    树型数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="381.html">
            
                <a href="381.html">
            
                    
                    堆数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="382.html">
            
                <a href="382.html">
            
                    
                    实现堆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="383.html">
            
                <a href="383.html">
            
                    
                    TRIE 数据结构示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="384.html">
            
                <a href="384.html">
            
                    
                    B 树数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="385.html">
            
                <a href="385.html">
            
                    
                    B- 树数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="386.html">
            
                <a href="386.html">
            
                    
                    图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="387.html">
            
                <a href="387.html">
            
                    
                    图介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.11" data-path="388.html">
            
                <a href="388.html">
            
                    
                    图表示——邻接矩阵和列表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.12" data-path="389.html">
            
                <a href="389.html">
            
                    
                    其他
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.13" data-path="390.html">
            
                <a href="390.html">
            
                    
                    哈希表数据结构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >树型数据结构</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h2 id="树型数据结构">树型数据结构</h2>
<blockquote>
<p>原文：<a href="https://www.studytonight.com/advanced-data-structures/avl-tree" target="_blank">https://www.studytonight.com/advanced-data-structures/avl-tree</a></p>
</blockquote>
<p>AVL 树是另一种特殊的树，它有几个特性使它特别。这些是:</p>
<ul>
<li><p>这是一个本质上平衡的 BST。</p>
</li>
<li><p>它是自我平衡的。</p>
</li>
<li><p>它不是完全平衡的。</p>
</li>
<li><p>每个子树也是一个 AVL 树。</p>
</li>
</ul>
<p>AVL 树的图示如下所示:</p>
<p><img src="img/87b29f362ad23cdc64cc94ab846d43e8.png" alt="AVL Tree"></img></p>
<p>当被解释时，我们可以说这是一个高度平衡的二叉查找树。<strong>高度平衡</strong>表示每个节点的左右子树高度之差不能大于 1(即<strong>高度(左)-高度(右)&lt; = 1</strong> )。</p>
<p><img src="img/a359ddaed83e97db87b9e41120e462ff.png" alt="AVL Tree with Balance Factor"></img></p>
<p>请注意，上面的 BST 中的每个节点都包含两个值，左值表示该节点的左子树的高度，右值表示该节点的右子树的高度，可以看出，在没有一个节点上，我们的值差大于 1，因此使其成为平衡的 AVL Tree。</p>
<p>一个<strong>自平衡树</strong>意味着当我们试图在这个 BST 中插入任何元素，如果它违反了任何节点的平衡因子，那么它会相应地动态旋转自己，使自己自平衡。众所周知，AVL 树是第一个被提出的著名的动态平衡树。</p>
<p>它不是完美平衡的，完美平衡意味着每个节点的右子树和左子树之间的<strong>高度等于 </strong>0<strong> 。</strong></p>
<p>完美平衡自动车辆定位树的图示如下所示:</p>
<p><img src="img/d0858637e902332efbc1d69abedae5b2.png" alt="Perfectly Balanced AVL Tree"></img></p>
<p>上述 AVL 树的所有节点的平衡因子等于 0( <strong>高度(左)-高度(右)= 0</strong> )，使其成为完美的 AVL 树。还需要注意的是，一个完美的 BST 和一个完美的 AVL 树是一样的。如果我们仔细看看上面所有的图形表示，我们可以清楚地看到，AVL 树的每个子树也是一个 AVL 树。</p>
<p>现在我们再来看两个图片，其中一个是 AVL 树，一个不是。</p>
<p><img src="img/f46a612834731732bf989198bcaed35b.png" alt="Difference "></img></p>
<p>虽然上面的两棵树都是 BST，但是上面的图中只有左边的 BST 是 AVL 树，因为它高度平衡。在右 BST 中，我们有两个违规节点(即 8 和 10)，在这两种情况下，平衡因子都大于 2。需要注意的是，这个树可以通过一定的方式进行旋转，使其成为 AVL 树。</p>
<h2 id="为什么是-avl-树？">为什么是 AVL 树？</h2>
<p>当我们已经有了类似的数据结构(即 BST 的)时，为什么我们还需要它的复杂版本呢？。答案在于，BST 在某些场景中有一些限制，使得搜索、插入等操作成本很高(与<code>O(n)</code>一样高)。</p>
<p>考虑下面两个 BST 的图示:</p>
<p><img src="img/8b07701f6d2a9549d139c1a2c0cdbd99.png" alt="BST difference"></img></p>
<p>左 BST 的高度为<code>O(logn)</code>，右 BST 的高度为<code>O(n)</code>，因此左 BST 的搜索操作时间复杂度为<code>O(logn)</code>，右偏斜的为<code>O(n)</code>，这也是其最坏的情况。因此，如果我们有这样一个倾斜的树，那么使用 BST 就没有任何好处，因为当涉及到时间和空间复杂度时，它就像一个链表。</p>
<p>这就是为什么我们需要一个平衡的 BST，这样所有的基本操作都保证了 O(logN)的时间复杂度。</p>
<h2 id="树旋转">树旋转</h2>
<p>如果 AVL 树遇到任何违反平衡因子的情况<strong>，那么它会尝试做一些旋转来使树再次平衡。总共有四次旋转，我们将逐一查看。主要有:</strong></p>
<ul>
<li><p>向左旋转</p>
</li>
<li><p>右旋转</p>
</li>
<li><p>左右旋转</p>
</li>
<li><p>左右旋转</p>
</li>
</ul>
<h3 id="1向左旋转">1.向左旋转</h3>
<p>当违规发生在违规节点的左子节点的左子树中时，将执行此循环。考虑下面一个不平衡的 BST 的图形表示，为了做到这一点，我们将做一些旋转。</p>
<p><img src="img/311ff47e76b0b51453346032436b4e24.png" alt="Right Skewed AVL "></img></p>
<p>很明显，这不是一个 AVL 树，但是考虑到违规发生的节点，我们把这个节点作为一个枢纽来进行我们的旋转。右边的树很重，导致问题的节点是 17，如果我们移除那个节点，我们将有一个平衡的 BST(即 AVL)。由于它严重向右倾斜，我们将向左旋转以使其平衡。</p>
<p>考虑将上面的右斜树做成 AVL 树的图示。</p>
<p><img src="img/a4c197b1b501a4dd7e74f694b060f74a.png" alt="Left Rotation Explained"></img></p>
<h3 id="2右旋转">2.右旋转</h3>
<p>当违规发生在违规节点的右子节点的右子树中时，将执行此循环。考虑下面一个不平衡的 BST 的图形表示，为了做到这一点，我们将做一些旋转。</p>
<p><img src="img/b8e423de5c4e71e61da364a348b9718f.png" alt="Left Skewed BST"></img></p>
<p>很明显，这不是一个 AVL 树，但是考虑到违规发生的节点，我们把这个节点作为一个枢纽来进行我们的旋转。树的左边很重，导致问题的节点是 3，如果我们移除那个节点，我们将有一个平衡的 BST(即 AVL)。由于它严重偏左，我们将做一个右旋转，使其平衡。</p>
<p>考虑将上面左倾的树做成 AVL 树的图示。</p>
<p><img src="img/c8932cb900a6802f93a097cde6d95c66.png" alt="Explained Difference Right Rotate"></img></p>
<h3 id="3左右旋转">3.左右旋转</h3>
<p>当违规发生在违规节点的左子节点的右子树中时，将执行此循环。考虑下面一个不平衡的 BST 的图形表示，为了做到这一点，我们将做一些旋转。</p>
<p><img src="img/f9c0b06afde1e2bc3de5e99ccb36271f.png" alt="Left-Right Rotation"></img></p>
<p>很明显，这不是一个 AVL 树，但是考虑到违规发生的节点，我们把这个节点作为一个枢纽来进行我们的旋转。导致问题的节点是 18，就好像我们去掉那个节点，我们就会有一个平衡的 BST(即 AVL)。因为这个问题是因为左子树的右子树，我们将进行左右旋转，使其平衡。</p>
<p>考虑将上面的树做成 AVL 树的图示。</p>
<p><img src="img/58df082d1eb5c2290458147819506151.png" alt="Explained AVL Difference"></img></p>
<h3 id="4左右旋转">4.左右旋转</h3>
<p>当违规发生在违规节点的右子节点的左子树中时，将执行此循环。考虑下面一个不平衡的 BST 的图形表示，为了做到这一点，我们将做一些旋转。</p>
<p><img src="img/57f97a6959ad0129a97268335a0470a3.png" alt="Right-Left BST"></img></p>
<p>很明显，这不是一个 AVL 树，但是考虑到违规发生的节点，我们把这个节点作为一个枢纽来进行我们的旋转。导致问题的节点是 7，如果我们移除那个节点，我们将有一个平衡的 BST(即 AVL)。由于问题是由于右子树的左子树，我们将进行左右旋转，使其平衡。</p>
<p>考虑将上面的树做成 AVL 树的图示。</p>
<p><img src="img/1f0b1b3e32d178f32965b20552af5cf4.png" alt="Explained AVL Tree "></img></p>
<h2 id="树插入">树插入</h2>
<p>让我们取一组数组元素，并构建这些元素的 AVL 树。让，<code>nums = [12 , 3 , 9 , 4 , 6 , 2]</code></p>
<p>制作 AVL 树(带旋转)的完整步骤如下所示。</p>
<p><img src="img/2353001d25736a013a0bd37851da3822.png" alt="Final Image"></img></p>
<h3 id="要点">要点:</h3>
<ul>
<li><p>具有 N 个节点的 AVL 树的最小楼层高度(logN)可以是 2。</p>
</li>
<li><p>节点数为 N 的 AVL 树的高度不能超过 1.44(logN)基数 2。</p>
</li>
<li><p>高度为 h 的 AVL 树中的最大节点数可以是:2^H+1 - 1</p>
</li>
<li><p>AVL 树的高度为 h 的最小节点数可以表示为:N(h) = N(h-1) + N(h-2) + 1，n&gt;2，其中 N(0) = 1，N(1) = 2。</p>
</li>
</ul>
<h2 id="结论">结论</h2>
<ul>
<li>我们了解了什么是 AVL 树以及为什么需要它。</li>
<li>然后，我们学习了 AVL 树中可能的不同类型的旋转，以使其成为一个平衡的旋转。</li>
<li>在旋转之后，我们还在 AVL 树中做了一个插入示例。</li>
<li>最后，我们谈到了我们应该记住的与 AVL 不同的关键点。</li>
</ul>
<hr></hr>
<hr></hr>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="379.html" class="navigation navigation-prev " aria-label="Previous page: 多维树数据结构">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="381.html" class="navigation navigation-next " aria-label="Next page: 堆数据结构">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"description":"CoderFAN 资料库 高级数据结构","title":"树型数据结构","level":"1.1.3","depth":2,"next":{"title":"堆数据结构","level":"1.1.4","depth":2,"path":"381.md","ref":"381.md","articles":[]},"previous":{"title":"多维树数据结构","level":"1.1.2","depth":2,"path":"379.md","ref":"379.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-search","-livereload","-lunr","-fontsettings","highlight","expandable-chapters-small","back-to-top-button","github","code","theme-default"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{"lang":{"eval_rst":"rst","toc":"text"}},"github":{"url":"https://github.com/KittenCN"},"expandable-chapters-small":{},"back-to-top-button":{},"code":{"copyButtons":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Todd Lyu","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"CoderFAN 资料库","gitbook":"*","description":"CoderFAN 资料库 高级数据结构"},"file":{"path":"380.md","mtime":"2025-05-12T03:21:13.583Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-05-12T03:24:43.840Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-code/plugin.js"></script>
        
    

    </body>
</html>

